<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Page 3 - Reaction Mechanism</title>

  <!-- Estilo global -->
  <link rel="stylesheet" href="../style.css" />

  <!-- Biblioteca D3.js -->
  <script src="https://d3js.org/d3.v7.min.js" defer></script>

  <!-- Script específico da página -->
  <script src="../js/page3.js" defer></script>
</head>
<body>
  <div id="container">
    
    <!-- Navigation Menu -->
    <nav>
      <ul>
        <li><a href="../index.html">Home</a></li>
        <li><a href="page0.html">Introduction</a></li>
        <li><a href="page1.html">Reaction orders</a></li>
        <li><a href="page2.html">Activation Energy</a></li>
        <li><a href="page3.html">Reaction Mechanism</a></li>
        <li><a href="page4.html">Catalyst Effect</a></li>
        <li><a href="page5.html">Radioactivity</a></li>
      </ul>
    </nav>

    <div class="page" id="page3" style="display:none">
      <h2>Reaction Mechanism: SN2</h2>
      <p>Animated mechanism of nucleophilic substitution will be shown here.</p>
      <svg id="mechanism" width="500" height="300" style="border:1px solid gray"></svg>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const svg = d3.select('#mechanism');

      // Elementos representando o substrato e o nucleófilo
      const substrate = svg.append('rect')
        .attr('x', 200)
        .attr('y', 150)
        .attr('width', 60)
        .attr('height', 30)
        .attr('fill', 'blue')
        .attr('rx', 10) // Arredondar os cantos
        .attr('ry', 10);

      const nucleophile = svg.append('circle')
        .attr('cx', 50)
        .attr('cy', 150)
        .attr('r', 10)
        .attr('fill', 'red');

      // Função para animar a reação SN2
      function animateReaction() {
        // Animando o movimento do nucleófilo em direção ao substrato
        nucleophile.transition()
          .duration(2000) // 2 segundos de animação
          .ease(d3.easeLinear)
          .attr('cx', 230) // Posição do nucleófilo após a reação
          .on('end', function () {
            // Trocar a cor do substrato para representar a reação
            substrate.transition()
              .duration(1000)
              .attr('fill', 'green');
            
            nucleophile.transition()
              .duration(1000)
              .attr('fill', 'green')
              .attr('r', 15); // Aumentar o tamanho do nucleófilo após a reação
          });
      }

      // Iniciar a animação
      setTimeout(animateReaction, 1000); // Espera 1 segundo para começar a animação
    });
  </script>
</body>
</html>
